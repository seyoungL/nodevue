(()=>{var e={611:(e,o,s)=>{const t=s(983);e.exports=class{constructor(e){this.pool=e}execute(e){t.using(this.pool.connect(),(o=>{e(o)}))}executeTx(e){t.using(this.pool.connect(),(o=>{o.beginTrasaction((s=>{e(o)}))}))}}},776:(e,o,s)=>{const t=s(366),n=s(669),r=s(983);r.promisifyAll(t),r.promisifyAll(s(640).prototype),r.promisifyAll(s(498).prototype);const i={host:"192.168.220.1",user:"testUser",password:"testPassword",database:"testdb",multipleStatements:!0,connectionLimit:5,waitForConnections:!1};e.exports=class{constructor(e){e=e||i,this.pool=t.createPool(e)}connect(){return this.pool.getConnectionAsync().disposer((e=>e.release()))}end(){this.pool.end((function(e){n.log(">>>>>> End of Pool."),e&&n.log("ERR pool ending")}))}}},647:e=>{"use strict";e.exports=JSON.parse('{"id":123,"name":"hong gil dong"}')},983:e=>{"use strict";e.exports=require("bluebird")},419:e=>{"use strict";e.exports=require("crypto-js")},826:e=>{"use strict";e.exports=require("ejs")},127:e=>{"use strict";e.exports=require("express")},366:e=>{"use strict";e.exports=require("mysql")},640:e=>{"use strict";e.exports=require("mysql/lib/Connection")},498:e=>{"use strict";e.exports=require("mysql/lib/Pool")},395:e=>{"use strict";e.exports=require("socket.io")},669:e=>{"use strict";e.exports=require("util")}},o={};function s(t){if(o[t])return o[t].exports;var n=o[t]={exports:{}};return e[t](n,n.exports,s),n.exports}(()=>{const{kdf:e}=s(419),o=s(669),t=s(127),n=s(776),r=s(611),i=new n,c=t(),l=s(647);c.use(t.static("public")),c.set("views",__dirname+"/views"),c.set("view engine","ejs"),c.engine("html",s(826).renderFile),c.get("/",((e,o)=>{o.render("index",{name:"홍길동"})})),c.get("/test/:email",((e,o)=>{l.email=e.params.email,l.addr=e.query.addr,o.json(l)})),c.get("/dbtest/:user",((e,o)=>{let s=e.params.user;new r(i).execute((e=>{e.query("select * from User where uid=?",[s],((e,s)=>{o.json(s)}))}))}));const u=c.listen(7e3,(function(){console.log("Express's started on port 7000")}));s(395)(u,{log:!1,origins:"*.*",pingInterval:3e3,pingTimeout:5e3}).sockets.on("connection",((e,s)=>{e.emit("message",{msg:"Welcome "+e.id}),o.log("connection>>",e.id,e.handshake.query),e.on("join",(function(s,t){e.join(s,(function(){o.log("Join",s,Object.keys(e.rooms)),t&&t()}))})),e.on("leave",(function(s,t){o.log("leave>>",s,e.id),e.leave(s,(function(){t&&t()}))})),e.on("rooms",(function(o){o&&o(Object.keys(e.rooms))})),e.on("message",((s,t)=>{o.log("message>>",s),e.broadcast.to(s.room).emit("message",{room:s.room,msg:s.msg}),t&&t(s.msg)})),e.on("disconnecting",(function(s){o.log("disconnecting>>",e.id,Object.keys(e.rooms))})),e.on("disconnect",(function(s){o.log("disconnect>>",e.id,Object.keys(e.rooms))}))}))})()})();